<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="R. S. Doiel, rsdoiel@caltech.edu" />
  <meta name="date" content="2025-01-13" />
  <meta name="keywords" content="CodeMeta, projects, build" />
  <title>CMTools, CodeMeta driven builds</title>
  <style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
    href="./styles/slidy.css" />
  <link rel="stylesheet" type="text/css" media="screen, projection, print"
   href="styles/coffee-and-cream.css" />
  <script src="./scripts/slidy.js"
    charset="utf-8" type="text/javascript"></script>
</head>
<body>
<div class="slide titlepage">
  <h1 class="title">CMTools, CodeMeta driven builds</h1>
  <p class="author">
R. S. Doiel, <a href="mailto:rsdoiel@caltech.edu"
class="email">rsdoiel@caltech.edu</a>
  </p>
  <p class="institute">
<p>Caltech Library, Digital Library Development</p>
  </p>
  <p class="date">2025-01-13</p>
</div>
<div class="slide" id="TOC">

</div>
<div id="what-is-cmtools" class="slide section level1">
<h1>What is CMTools?</h1>
<p>CMTools provides a means of generating and maintain various software
artifacts based on the contents of your <a
href="https://codemeta.github.io">CodeMeta</a> file.</p>
</div>
<div id="what-are-software-artifacts" class="slide section level1">
<h1>What are Software Artifacts?</h1>
<dl>
<dt>Software Artifacts</dt>
<dd>
Project related files that related to development, build and release
processes
</dd>
</dl>
<p>Example: about Markdown page, CITATION.cff, version files</p>
</div>
<div id="why-codemeta" class="slide section level1">
<h1>Why CodeMeta?</h1>
<ul>
<li>CodeMeta is a maturing spec supporting metadata about projects</li>
<li>We already use it when we import software to our <a
href="https://data.caltech.edu">data repository</a></li>
<li>It is a superset of CITATION.cff used for search and discovery on
GitHub</li>
</ul>
</div>
<div id="what-problem-does-cmtools-assist-with"
class="slide section level1">
<h1>What problem does CMTools assist with?</h1>
<ul>
<li>Initial projects setup</li>
<li>Maintenance of CodeMeta driven software artifacts</li>
<li>Avoid the challenges of hand editing GitHub template documents</li>
<li>Avoid copy edit cycles</li>
</ul>
</div>
<div id="so-how-exactly-does-this-work" class="slide section level1">
<h1>So how exactly does this work?</h1>
<p>In the old days ….</p>
</div>
<div id="project-setup-old-way" class="slide section level1">
<h1>Project setup, old way</h1>
<ol style="list-style-type: decimal">
<li>go to GitHub</li>
<li>clone a template repository to get basic software artifacts</li>
<li>edit <strong>all</strong> the artifact (tedious, often not
done)</li>
<li>start documenting and coding the project (the real work)</li>
</ol>
</div>
<div id="proposed-setup" class="slide section level1">
<h1>Proposed setup</h1>
<ol style="list-style-type: decimal">
<li>go to GitHub</li>
<li>clone template repository</li>
<li>edit <strong>three</strong> artifacts (e.g. codemeta.json, README,
INSTALL)</li>
<li>generate artifacts with CMTools</li>
<li>start documenting and coding the project (the real work)</li>
</ol>
</div>
<div id="why-is-five-steps-better-than-four"
class="slide section level1">
<h1>Why is five steps better than four?</h1>
<p>The generated artifacts can be maintained with the same command that
generated them.</p>
<p>The artifact are easy to keep up to date.</p>
</div>
<div id="project-maintenance-old-way" class="slide section level1">
<h1>Project maintenance, old way</h1>
<blockquote>
<p>Go through each artifact and edit it</p>
</blockquote>
<ul>
<li>very tedious</li>
<li>often incomplete done</li>
<li>lower quality -&gt; higher maintenance</li>
</ul>
</div>
<div id="proposed-maintenance-cycle" class="slide section level1">
<h1>Proposed maintenance cycle</h1>
<p>One command for each supported language:</p>
<ul>
<li>Python
<ul>
<li><code>cmt codemeta.json CITATION.cff about.md version.py</code></li>
</ul></li>
<li>Go
<ul>
<li><code>cmt codemeta.json CITATION.cff about.md version.go</code></li>
</ul></li>
<li>JavaScript
<ul>
<li><code>cmt codemeta.json CITATION.cff about.md version.js</code></li>
</ul></li>
<li>TypeScript
<ul>
<li><code>cmt codemeta.json CITATION.cff about.md version.js</code></li>
</ul></li>
</ul>
<blockquote>
<p>One command versus hand editing!</p>
</blockquote>
</div>
<div id="what-files-does-cmt-currently-manage"
class="slide section level1">
<h1>What files does <code>cmt</code> currently manage?</h1>
<ul>
<li>CITATION.cff</li>
<li>about.md</li>
<li>version.(ts|go|js|py)</li>
<li>page.(tmpl|hbs)</li>
</ul>
</div>
<div id="cmt-and-deno-tasks" class="slide section level1">
<h1><code>cmt</code> and Deno tasks</h1>
<ul>
<li><code>cmt</code> can manage <code>cmt</code> Deno tasks</li>
<li>Deno tasks can be used to build non-Deno projects
<ul>
<li>Deno works the same on Windows, macOS and Linux</li>
</ul></li>
</ul>
</div>
<div id="what-could-codemetacmtools-also-manage"
class="slide section level1">
<h1>What could CodeMeta/CMTools also manage?</h1>
<p>CodeMeta file could be used to generate</p>
<ul>
<li>README.md</li>
<li>INSTALL.md</li>
<li>install scripts for Windows, macOS and Linux</li>
<li>.gitignore</li>
</ul>
</div>
<div id="what-else" class="slide section level1">
<h1>What else?</h1>
<p>CodeMeta <code>.otherRequiredSoftware</code> attribute could be used
to check if your dev environment is setup correctly.</p>
</div>
<div id="codemeta-as-part-of-your-build-process"
class="slide section level1">
<h1>CodeMeta as part of your build process</h1>
<p>Many times it’s easy to forget to update your CodeMeta file until
you’re trying to import it into the data repository. A better approach
is to have the codemeta file actually be part of your build and release
process. That way version information is consistent and specific. It can
also be easily reflected in the documentation of your project’s website.
Having/maintaining a project website becomes trivial for each new
release.</p>
</div>
<div id="template-were-a-good-start-but" class="slide section level1">
<h1>Template were a good start but …</h1>
<p>The overhead of manually editing files or maintaining complex scripts
to editor those files is problematic.</p>
<p>Just generating the files and refreshing the generated files is
easier and simpler.</p>
</div>
<div id="how-do-i-install-cmtools" class="slide section level1">
<h1>How do I install CMTools?</h1>
<p>CMTools highly experimental. Build from source.</p>
<ol style="list-style-type: decimal">
<li>Install <a href="https://deno.com/">deno</a></li>
<li>Clone the <a
href="https://github.com/caltechlibrary/CMTools">CMTools</a></li>
<li>Change into the cloned directory</li>
<li>Run <code>deno install npm:handlebars</code></li>
<li>Run <code>deno task build</code></li>
<li>Copy the resulting <code>bin/cmt</code> or <code>bin/cmt.exe</code>
to you home “bin” directory</li>
</ol>
</div>
<div id="or-quick-install" class="slide section level1">
<h1>Or quick install</h1>
<p>For macOS and Linux</p>
<pre class="shell"><code>curl -L https://caltechlibrary.github.io/CMTools/installer.sh | sh</code></pre>
<p>For Windows (using Powershell)</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode ps1"><code class="sourceCode powershell"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">irm</span> https<span class="op">://</span>caltechlibrary<span class="op">.</span><span class="fu">github</span><span class="op">.</span><span class="fu">io</span><span class="op">/</span>CMTools<span class="op">/</span>installer<span class="op">.</span><span class="fu">ps1</span> <span class="op">|</span> <span class="fu">iex</span></span></code></pre></div>
</div>
<div id="something-to-consider" class="slide section level1">
<h1>Something to consider</h1>
<blockquote>
<p>Software lives longer than expected, long lived software requires
maintenance</p>
</blockquote>
</div>
<div id="reference-links" class="slide section level1">
<h1>Reference links</h1>
<ul>
<li>CMTools: <a href="https://caltechlibrary.github.io/CMTools"
class="uri">https://caltechlibrary.github.io/CMTools</a></li>
<li>on GitHub: <a href="https://github.com/caltechlibrary/CMTools"
class="uri">https://github.com/caltechlibrary/CMTools</a></li>
<li>CodeMeta: <a href="https://codemeta.github.io"
class="uri">https://codemeta.github.io</a></li>
<li>Deno: <a href="https://deno.com"
class="uri">https://deno.com</a></li>
</ul>
<p>Thank you!</p>
</div>
</body>
</html>
